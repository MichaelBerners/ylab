# (Monitoring-Service) Сервис для подачи показаний счетчиков отопления, горячей и холодной воды
___

## Описание
- Показания можно подавать один раз в месяц.
- Ранее поданые показания редактировать запрещено.
- Последние поданые показания считаются актуальными.
- Пользователь может видеть только свои показания, администратор может видеть показания всех пользователей.
- Создайте реализацию, которая соответствует описанным ниже требованиям и ограничениям.

## Требования
- предусмотреть расширение перечня подаваемых показаний
- данные хранятся в памяти приложения
- приложение должно быть консольным (никаих спрингов, взаимодействий с БД и тд, только java-core и collections)
- регистрация пользователя
- авторизация пользователя
- реализовать эндпоинт для получения актуальных показаний счетчиков
- реализовать эндпоинт подачи показаний
- реализовать эндпоинт просмотра показаний за конкретный месяц
- реализовать эндпоинт просмотра истории подачи показаний
- реализовать контроль прав пользователя
- Аудит действий пользователя (авторизация, завершение работы, подача показаний, получение истории подачи показаний и тд)

## Нефункциональные требования
Unit-тестирование

[репозиторий первого задания](https://github.com/MichaelBerners/ylab/tree/fix)

---


### (2. JDBC. Миграции БД) Требования:

- Репозитории теперь должны писать ВСЕ сущности в БД PostgreSQL

- Идентификаторы при сохранении в БД должны выдаваться через sequence

- DDL-скрипты на создание таблиц и скрипты на предзаполнение таблиц должны выполняться только инструментом миграции Liquibase

- Скрипты миграции Luiqbase должны быть написаны в нотации XML или YAML

- Скриптов миграции должно быть несколько. Как минимум один на создание всех таблиц, другой - на предзаполнение данными

- Служебные таблицы должны быть в отдельной схеме

- Таблицы сущностей хранить в схеме public запрещено

- В тестах необходимо использовать test-containers

- В приложении должен быть docker-compose.yml, в котором должны быть прописаны инструкции для развертывания postgre в докере. Логин, пароль и база должны быть отличными от тех, что прописаны в образе по-умолчанию. Приложение должно работать с БД, развернутой в докере с указанными параметрами.

- Приложение должно поддерживать конфиг-файлы. Всё, что относится к подключению БД, а также к миграциям, должно быть сконфигурировано через конфиг-файл.

#### Проект запускается из класса Runner

[репозиторий второго задания](https://github.com/MichaelBerners/ylab/tree/hw2)

---

### (3. Monitoring-Service. Servlet API и AOP)

- Все взаимодействие должно теперь осуществляться через отправку HTTP запросов

- Сервлеты должны принимать JSON и отдавать также JSON

- Для сериализации и десереализации использовать jackson

- Использовать понятное именование эндпоинтов

- Возвращать разные статус-коды

- Добавить  DTO (если ранее не было заложено в логике)

- Для маппинга сущностей в дто использовать MapStruct

- Реализовать валидацию входящих ДТО

- Аудит переделать на аспекты через аннотацию

- Также реализовать на аспектах логирование выполнения любого метода (с замером времени выполнения)

- Сервлеты должны быть покрыты тестами
